<app-header (setSeasons)="setSeasons($event)" [activeSeasons]="(activeSeasons$ | async)"
            [seasons]="(seasons$ | async)" [title]="activeVineyard ? activeVineyard.name : 'My vineyards'" [menuId]="'menu1'"></app-header>

<ion-menu side="start" content-id="main-content">
    <ion-header>
        <ion-toolbar translucent>
            <ion-title>Menu</ion-title>
        </ion-toolbar>
    </ion-header>
    <ion-content>

        <ion-list>
            <ion-item button (click)="openOverview()">
                <ion-icon name="arrow-back-outline" slot="start"></ion-icon>
                <ion-label>Vineyards</ion-label>
            </ion-item>
            <ion-item button (click)="openTab('info')"  [class.selected]="activePage === 'info'">
                <ion-icon name="information-circle" slot="start"></ion-icon>
                <ion-label>Info</ion-label>
            </ion-item>
            <ion-item button (click)="openTab('actions')"  [class.selected]="activePage === 'actions'">
                <ion-icon name="calendar-outline" slot="start"></ion-icon>
                <ion-label>History</ion-label>
            </ion-item>
            <ng-container *appHideOnPlatform="['mobile']">
                <ion-item button (click)="openTab('vintages')"  [class.selected]="activePage === 'vintages'" >
                    <ion-icon name="wine-outline" slot="start"></ion-icon>
                    <ion-label>Vintages</ion-label>
                </ion-item>
            </ng-container>
            <ng-container *appHideOnPlatform="['desktop']">
                <ion-item button (click)="toggleSubmenu('vintages')"  [class.selected]="activePage === 'vintages'" >
                    <ion-icon name="wine-outline" slot="start"></ion-icon>
                    <ion-label>Vintages</ion-label>
                </ion-item>
                <div class="submenu" *ngIf="activeSubMenus.includes('vintages')">
                    <ion-item button (click)="openVintage(vintage)"  *ngFor="let vintage of (vintages$ | async)">
                        <ion-img class="icon" [src]="'assets/icon/grape_' + vintage.color.toLowerCase() +'.png'"  slot="start"></ion-img>
                        <ion-label>{{vintage.year}} - {{vintage.name}}</ion-label>
                    </ion-item>
                </div>
            </ng-container>
            <ion-item button (click)="openTab('stats')"   [class.selected]="activePage === 'stats'" *appHideOnPlatform="['mobile']">
                <ion-icon name="stats-chart" slot="start"></ion-icon>
                <ion-label>Statistics</ion-label>
            </ion-item>
        </ion-list>
    </ion-content>
</ion-menu>

<ion-content id="main-content">
    <div class="container">
        <div class="content">
            <app-info *ngIf="activePage === 'info'" [vineyard]="activeVineyard" [varieties]="(varieties$ | async)"
                [actions]="(actions$ | async)"
            ></app-info>
            <app-actions *ngIf="activePage === 'actions'" [actions]="(actions$ | async)"
                         [vineyard]="activeVineyard"></app-actions>
            <app-statistics *ngIf="activePage === 'stats'" [seasons]="(activeSeasons$ | async)"
                            [vineyard]="activeVineyard"></app-statistics>
            <app-vintages *ngIf="activePage === 'vintages'" [vineyard]="activeVineyard" [vintages]="(vintages$ | async)" [vintage]="activeVintage"></app-vintages>
        </div>
    </div>
</ion-content>
