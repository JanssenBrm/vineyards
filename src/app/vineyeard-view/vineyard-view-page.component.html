<app-header (setSeasons)="setSeasons($event)" [activeSeasons]="(activeSeasons$ | async)"
            [seasons]="(seasons$ | async)" [title]="activeVineyard ? activeVineyard.name : 'My vineyards'"
            [menuId]="'menu1'"></app-header>

<ion-menu side="start" content-id="main-content" *appHideOnPlatform="['desktop']">
    <ion-header>
        <ion-toolbar translucent>
            <ion-title>Menu</ion-title>
        </ion-toolbar>
    </ion-header>
    <ion-content class="menu-content">
        <app-menu [seasons]="seasons$ | async" [activeSeasons]="activeSeasons$ | async"
                  [activeVineyard]="activeVineyard" [vintages]="vintages$ | async"
                  (tabUpdated)="openTab($event)"
                  (seasonsUpdated)="closeMenu()"
                  (openVintage)="openVintage($event)"
        ></app-menu>
    </ion-content>
</ion-menu>

<ion-content id="main-content">
    <div class="container">
        <div class="sidebar" *appHideOnPlatform="['mobile']">
            <app-menu [seasons]="seasons$ | async" [activeSeasons]="activeSeasons$ | async"
                      [activeVineyard]="activeVineyard" [vintages]="vintages$ | async"
                      (tabUpdated)="openTab($event)"
                      (seasonsUpdated)="closeMenu()"
                      (openVintage)="openVintage($event)"
            ></app-menu>
        </div>
        <div class="content">
            <app-info *ngIf="activePage === 'info'" [vineyard]="activeVineyard" [varieties]="(varieties$ | async)"
                      [actions]="(actions$ | async | filterActionsBySeason: (activeSeasons$ | async))"
            ></app-info>
            <app-actions *ngIf="activePage === 'actions'"
                         [actions]="(actions$ | async | filterActionsBySeason: (activeSeasons$ | async))"
                         [vineyard]="activeVineyard"></app-actions>
            <app-statistics *ngIf="activePage === 'stats'" [seasons]="(activeSeasons$ | async)"
                            [vineyard]="activeVineyard"></app-statistics>
            <app-vintages *ngIf="activePage === 'vintages'" [vineyard]="activeVineyard" [vintages]="(vintages$ | async)"
                          [vintage]="activeVintage"></app-vintages>
        </div>
    </div>
</ion-content>
